<!DOCTYPE html>
<html>
  <head>
    <title>Cancer Mutation Signatures</title>
    <link rel="stylesheet" type="text/css" href="css/style.css">
  </head>
  <body>

    <div class="container">
      <h1>Cancer Mutation Signatures</h1>

      <form id="dataset-form">
        <label>Select ICGC Project:</label>
        <br>
        <select id="dataset-form_select">
          {% for project in icgc_ssm_projects %}
            <option value="{{ project['id'] }}">{{ project['name'] }}</option>
          {% endfor %}
        </select>
        <br>
        <button type="submit">Go</button>
      </form>
      <div id="dataset-loader" style="display: none;">Loading...</div>

      <div id="visualization"></div>
      <div id="options">
        <input type="checkbox" id="switch" /><label for="switch"></label>
        <label class="toggle_label">Overlay Jitter Plot</label>
        <div class="clearfix"></div>
        <br>
        <label for="exposure-range" id="exposure-range-label">Signature Exposure Threshold</label><br>
        <input id="exposure-range" type="range" value="0" min="0" max="100" oninput="updateExposureThreshold()"/><span id="exposure-range-value">0.00</span>
      </div>
      <div class="clearfix"></div>
      <p class="figure_label">
        Distribution of contributions of 30 COSMIC signatures over cancer samples inferred using QP method. <!--Three signatures (9, 12 and 16) suggested to be novel in breast cancers are marked bold; signatures not present in breast cancer are gray. The signatures 9, 12 and 16 were evaluated in terms of their contribution stability in the bootstrap and simulated annealing analyses. -->
        <br><br>
        To show data points for each sample, toggle jitter plots using the switch above. Hover over a point to highlight all points corresponding to that sample in the other plots. Use the signature exposure threshold slider to update box plots to filter out low signature contributions.
      </p>

      <p class="citation">Inspired by Figure 3A in Huang, Xiaoqing, Damian Wojtowicz, and Teresa M. Przytycka. "Detecting Presence Of Mutational Signatures In Cancer With Confidence." bioRxiv (2017): 132597.</p>

      <div id="visualization-clustering"></div>
    </div>

    <a href="https://github.com/keller-mark/mutation-visualization" id="github_link"></a>

    <script src="http://d3js.org/d3.v3.min.js"></script>
    <script src="js/datasets.js"></script>
    <script src="js/box.js"></script>
    <script src="js/mut_viz.js"></script>
  </body>
</html>
